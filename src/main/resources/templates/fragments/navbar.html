<!-- fragments/navbar.html -->
<!-- Responsive Modern Charity Navbar -->
<nav class="navbar navbar-expand-lg navbar-sticky-top navbar-shadow bg-white shadow-sm" th:fragment="navbar">
    <div class="container">
        <!-- Logo -->
        <a class="navbar-brand d-flex align-items-center" href="/home">
            <img th:src="@{/charity.png}" src="/charity.png" alt="CharityApp Logo" width="36" height="36" style="object-fit:contain;">
            <span class="ms-2 fw-bold" style="font-size:1.5rem; font-family: 'Segoe UI', Arial, sans-serif; letter-spacing:0.5px;">CharityApp</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
                <!-- LOGGED OUT NAV -->
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/about">About Us</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/programs">Programs</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/getinvolved">Get Involved</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/blog">Blog</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/login">Login</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link" href="/register">Register</a>
                </li>
                <!-- Optionally as dropdown for mobile -->
                <li class="nav-item dropdown d-lg-none" sec:authorize="isAnonymous()">
                    <a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Account</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="authDropdown">
                        <li><a class="dropdown-item" href="/login">Login</a></li>
                        <li><a class="dropdown-item" href="/register">Register</a></li>
                    </ul>
                </li>

                <!-- LOGGED IN USER NAV -->
                <li class="nav-item" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link" href="/about">About Us</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link" href="/programs">Programs</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link" href="/getinvolved">Get Involved</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link" href="/blog">Blog</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('USER') and !hasRole('ORGANIZATION')">
                    <a class="btn btn-primary ms-lg-2 px-4" style="font-weight:600;" href="/donate">Donate</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ORGANIZATION')">
                    <a class="btn btn-success ms-lg-2 px-4" style="font-weight:600;" href="/organization/charity-actions/new">
                        <i class="bi bi-plus-circle me-1"></i> Create Charity Action
                    </a>
                </li>
                <li class="nav-item dropdown" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="/images/avatar.png" alt="Avatar" class="rounded-circle me-2" width="28" height="28">
                        <span sec:authentication="name">User</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" href="/donations"><i class="bi bi-cash-coin me-2"></i>My Donations</a></li>
                        <li><a class="dropdown-item" href="/profile/volunteering"><i class="bi bi-people-heart me-2"></i>My Volunteering</a></li>
                        <li><a class="dropdown-item" href="/profile/settings"><i class="bi bi-gear me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="/logout"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                    </ul>
                </li>
                <li class="nav-item d-lg-none" sec:authorize="hasRole('USER') and isAuthenticated() and !hasRole('ADMIN')">
                    <a class="nav-link text-danger" href="/logout"><i class="bi bi-box-arrow-right"></i> Logout</a>
                </li>

                <!-- LOGGED IN ADMIN NAV -->
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link d-flex align-items-center fw-bold text-danger" href="/admin">
                        <i class="bi bi-speedometer2 me-2"></i>Dashboard
                        <span class="badge bg-danger ms-2">ADMIN</span>
                    </a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link" href="/admin/programs"><i class="bi bi-list-task me-2"></i>Manage Programs</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link" href="/admin/users"><i class="bi bi-people me-2"></i>Manage Users</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link" href="/admin/donations"><i class="bi bi-cash-coin me-2"></i>Manage Donations</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link" href="/admin/reports"><i class="bi bi-bar-chart-line me-2"></i>Reports</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN') and isAuthenticated()">
                    <a class="nav-link text-danger d-flex align-items-center" href="/logout"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<style>
.navbar-sticky-top {
    position: sticky;
    top: 0;
    z-index: 1030;
}
.navbar-shadow {
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}
.navbar-nav .nav-link {
    font-size: 1.08rem;
    font-weight: 500;
    color: #333;
    transition: color 0.2s;
}
.navbar-nav .nav-link:hover, .navbar-nav .nav-link.active {
    color: #0d6efd;
}
.navbar-brand img {
    border-radius: 8px;
    background: #f5f6fa;
    padding: 2px;
}
.btn-primary {
    background: linear-gradient(90deg, #1e90ff 0%, #00c6ff 100%);
    border: none;
    font-size: 1.08rem;
    box-shadow: 0 2px 8px rgba(30,144,255,0.10);
    transition: background 0.2s;
}
.btn-primary:hover {
    background: linear-gradient(90deg, #00c6ff 0%, #1e90ff 100%);
}
</style>
